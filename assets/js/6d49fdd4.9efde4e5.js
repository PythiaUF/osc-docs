"use strict";(self.webpackChunkosc_docs=self.webpackChunkosc_docs||[]).push([[2424],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>g});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(a),c=l,g=u["".concat(s,".").concat(c)]||u[c]||m[c]||r;return a?n.createElement(g,i(i({ref:t},d),{},{components:a})):n.createElement(g,i({ref:t},d))}));function g(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},4458:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(7462),l=(a(7294),a(3905));const r={title:"Blog Route",description:"Club Website Developer API",sidebar_position:2},i="Blog Route",o={unversionedId:"Developers/API/blog",id:"Developers/API/blog",title:"Blog Route",description:"Club Website Developer API",source:"@site/docs/website/Developers/API/blog.md",sourceDirName:"Developers/API",slug:"/Developers/API/blog",permalink:"/docs/website/Developers/API/blog",draft:!1,editUrl:"https://github.com/ufosc/osc-docs/blob/main/docs/website/Developers/API/blog.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Blog Route",description:"Club Website Developer API",sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"API & Routes",permalink:"/docs/website/Developers/API/"},next:{title:"Contact Route",permalink:"/docs/website/Developers/API/contact"}},s={},p=[{value:"Bulk Retrieve Posts: (GET) /api/blog/",id:"bulk-retrieve-posts-get-apiblog",level:2},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Sample Response",id:"sample-response",level:3},{value:"Example",id:"example",level:3},{value:"Fetch Article Page: (GET) api/blog/:id",id:"fetch-article-page-get-apiblogid",level:2},{value:"Request Parameters",id:"request-parameters-1",level:3},{value:"Example",id:"example-1",level:3},{value:"Create Article: (POST) /api/blog/",id:"create-article-post-apiblog",level:2},{value:"Request Parameters",id:"request-parameters-2",level:3},{value:"Response",id:"response",level:3},{value:"Example",id:"example-2",level:3},{value:"Modify Article: (PUT) api/blog/:id",id:"modify-article-put-apiblogid",level:2},{value:"Request Parameters",id:"request-parameters-3",level:3},{value:"Response",id:"response-1",level:3},{value:"Example",id:"example-3",level:3},{value:"Delete Article: (DELETE) api/blog/:id",id:"delete-article-delete-apiblogid",level:2},{value:"Request Parameters",id:"request-parameters-4",level:3},{value:"Response",id:"response-2",level:3},{value:"Example",id:"example-4",level:3}],d={toc:p},u="wrapper";function m(e){let{components:t,...a}=e;return(0,l.kt)(u,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"blog-route"},"Blog Route"),(0,l.kt)("p",null,"The blog route interfaces with the blog ",(0,l.kt)("a",{parentName:"p",href:"/docs/website/Developers/Databases/models"},"database model")," and dynamically renders blog articles."),(0,l.kt)("admonition",{title:"routes/blog.js",type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"The blog route is defined in ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/ufosc/Club_Website_2/blob/main/routes/blog.js"},"/routes/blog.js")," and operates on the ",(0,l.kt)("inlineCode",{parentName:"p"},"/api/blog")," API path.")),(0,l.kt)("h2",{id:"bulk-retrieve-posts-get-apiblog"},"Bulk Retrieve Posts: (GET) /api/blog/"),(0,l.kt)("p",null,"To index posts in the /blog and /admin pages, it was necessary to implement a route which returned an index of the most recent posts. Unlike the ",(0,l.kt)("inlineCode",{parentName:"p"},"GET: /api/blog/:id")," route, which returns an HTML render of the blog, the ",(0,l.kt)("inlineCode",{parentName:"p"},"GET: /api/blog/")," route returns the underlying JSON objects."),(0,l.kt)("p",null,"Although authentication is optional, non-authenticated users can only retrieve posts that are marked ",(0,l.kt)("inlineCode",{parentName:"p"},"status: published"),"."),(0,l.kt)("h3",{id:"request-parameters"},"Request Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JWT (cookie)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Auth cookie")))),(0,l.kt)("h3",{id:"sample-response"},"Sample Response"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Content-Type: application/json"',title:'"Content-Type:','application/json"':!0},'[\n    {\n        "_id":"64be230c227074ba993f8e3f",\n        "title":"post has been modified",\n        "status":"draft",\n        "previewImg":"/assets/blog_default_img.jpeg",\n        "content":"my modified article",\n        "subtitle":"my draft",\n        "author":["zeim839"],\n        "date":"2023-07-24T07:06:52.208Z",\n        "__v":0\n    }\n]\n')),(0,l.kt)("p",null,"Empty response:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Content-Type: application/json"',title:'"Content-Type:','application/json"':!0},"[]\n")),(0,l.kt)("h3",{id:"example"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -XGET 'https://ufosc.org/api/blog'\n")),(0,l.kt)("h2",{id:"fetch-article-page-get-apiblogid"},"Fetch Article Page: (GET) api/blog/:id"),(0,l.kt)("p",null,"This route fetches articles by the specified URL ID parameter and returns them as rendered HTML. An error article is rendered if the ID is invalid or non-existent."),(0,l.kt)("p",null,"Articles whose status is not 'published' (e.g 'draft') are only visible to authenticated users. They do not render on the /blog page, but may be accessed by authenticated users if their ID is known. Generally, authenticated users may access these posts by clicking on the 'preview' button alongside their table entries in the ",(0,l.kt)("a",{parentName:"p",href:"/docs/website/admin"},"admin dashboard"),"."),(0,l.kt)("h3",{id:"request-parameters-1"},"Request Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},":id (path)"),(0,l.kt)("td",{parentName:"tr",align:null},"ID of the requested blog post.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JWT (cookie)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Auth cookie for accessing restricted posts.")))),(0,l.kt)("h3",{id:"example-1"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -XGET 'https://ufosc.org/api/blog/<BLOG ID HERE>'\n")),(0,l.kt)("h2",{id:"create-article-post-apiblog"},"Create Article: (POST) /api/blog/"),(0,l.kt)("p",null,"This route consumes a JSON body and produces a new blog article. This route requires authentication."),(0,l.kt)("h3",{id:"request-parameters-2"},"Request Parameters"),(0,l.kt)("p",null,"Request body: ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JWT (cookie)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Required) Auth cookie")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"title (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Required) Article title")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"status (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Required) Article status")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"previewImg (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article banner image URL")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"content (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article body text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"subtitle (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article subtitle")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"author (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) JSON string array of author names")))),(0,l.kt)("h3",{id:"response"},"Response"),(0,l.kt)("p",null,"The server responds with the newly created JSON blog object."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="application/json"',title:'"application/json"'},'{\n    "_id":"64be231938d6d068d0732b50",\n    "title":"new post",\n    "status":"published",\n    "previewImg":"/assets/blog_default_img.jpeg",\n    "content":"my new article",\n    "author":["zeim839"],\n    "date":"2023-07-24T07:07:05.160Z","__v":0\n}\n')),(0,l.kt)("p",null,"If the request body is missing the required ",(0,l.kt)("inlineCode",{parentName:"p"},"title")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"status")," keys, the following error will be returned:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="routes/blog.js"',title:'"routes/blog.js"'},'{ "error": "Missing field(s) in request body" }\n')),(0,l.kt)("p",null,"If the client attempts to manually assign an ID, by including an ",(0,l.kt)("inlineCode",{parentName:"p"},"_id")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," key in the request body, the following error will be returned:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="routes/blog.js"',title:'"routes/blog.js"'},'{ "error": "Setting custom blog ID is prohibited" }\n')),(0,l.kt)("h3",{id:"example-2"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'curl -XPOST --cookie "jwt=<AUTH COOKIE>" -H "Content-type: application/json" -d \'{\n    "title":"my blog title,\n    "status":"published"\n}\' \'https://ufosc.org/api/blog/\'\n')),(0,l.kt)("h2",{id:"modify-article-put-apiblogid"},"Modify Article: (PUT) api/blog/:id"),(0,l.kt)("p",null,"Modifies the existing article specified by the path parameter ':id'. This is an authenticated route."),(0,l.kt)("h3",{id:"request-parameters-3"},"Request Parameters"),(0,l.kt)("p",null,"Request body: ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},":id (path)"),(0,l.kt)("td",{parentName:"tr",align:null},"ID of the requested blog post.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JWT (cookie)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Required) Auth cookie")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"title (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article title")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"status (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article status")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"previewImg (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article banner image URL")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"content (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article body text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"subtitle (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) Article subtitle")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"author (body)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Optional) JSON string array of author names")))),(0,l.kt)("h3",{id:"response-1"},"Response"),(0,l.kt)("p",null,"The server responds with the modified JSON blog object"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="application/json"',title:'"application/json"'},'{\n    "_id":"64be231938d6d068d0732b50",\n    "title":"modified post",\n    "status":"published",\n    "previewImg":"/assets/blog_default_img.jpeg",\n    "content":"my modified article",\n    "author":["zeim839"],\n    "date":"2023-07-24T07:07:05.160Z","__v":0\n}\n')),(0,l.kt)("p",null,"If the ",(0,l.kt)("inlineCode",{parentName:"p"},"_id")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"date")," keys are omitted, then the above response example may also be used as a sample request body. Note that all schema keys are optional: only the key/values that the client wishes to modify need to be specified."),(0,l.kt)("p",null,"If the ':id' parameter is invalid, the following JSON object is returned:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="routes/blog.js"',title:'"routes/blog.js"'},'{ "error": "Invalid ID" }\n')),(0,l.kt)("p",null,"If the ID is valid but not longer exists, the following JSON object is returned:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="routes/blog.js"',title:'"routes/blog.js"'},'{ "error": "ID does not exist" }\n')),(0,l.kt)("p",null,"To maintain database collection consistency, and prevent unexpected collision/behavior from renamed article IDs, modifying the ID parameter of an article is prohibited. If a client attempts to send a JSON request body with an ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"_id")," key, the following error will be returned:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="routes/blog.js"',title:'"routes/blog.js"'},'{ "error": "Setting custom blog ID is prohibited" }\n')),(0,l.kt)("p",null,"If a client lacks sufficient authentication, a status 401-Forbidden error will be returned."),(0,l.kt)("h3",{id:"example-3"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'curl -XPUT --cookie "jwt=<AUTH COOKIE>" -H "Content-type: application/json" -d \'{\n    "previewImg":"/assets/blog_default_img.jpeg",\n    "content":"my modified article",\n    "author":["zeim839"]\n}\' \'https://ufosc.org/api/blog/<BLOG ID HERE>\'\n')),(0,l.kt)("h2",{id:"delete-article-delete-apiblogid"},"Delete Article: (DELETE) api/blog/:id"),(0,l.kt)("p",null,"Deletes the blog post specified by the path parameter ':id'. This is an authenticated route."),(0,l.kt)("h3",{id:"request-parameters-4"},"Request Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},":id (path)"),(0,l.kt)("td",{parentName:"tr",align:null},"ID of the requested blog post.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JWT (cookie)"),(0,l.kt)("td",{parentName:"tr",align:null},"(Required) Auth cookie")))),(0,l.kt)("h3",{id:"response-2"},"Response"),(0,l.kt)("p",null,"The server responds with the JSON object of the deleted article."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Content-Type: application/json"',title:'"Content-Type:','application/json"':!0},'{\n    "_id":"64be231938d6d068d0732b50",\n    "title":"test post",\n    "status":"published",\n    "previewImg":"/assets/blog_default_img.jpeg",\n    "content":"my article",\n    "author":[],\n    "date":"2023-07-24T07:07:05.160Z","__v":0\n}\n')),(0,l.kt)("p",null,"If the ':id' parameter is invalid, the following JSON object is returned:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="routes/blog.js"',title:'"routes/blog.js"'},'{ "error": "Invalid ID" }\n')),(0,l.kt)("p",null,"If the ID is valid but not longer exists, the following JSON object is returned:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="routes/blog.js"',title:'"routes/blog.js"'},'{ "error": "Blog not found" }\n')),(0,l.kt)("p",null,"If a client lacks sufficient authentication, a status 401-Forbidden error will be returned."),(0,l.kt)("h3",{id:"example-4"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -XDELETE --cookie \"jwt=<AUTH COOKIE>\" 'https://ufosc.org/api/blog/<BLOG ID HERE>'\n")))}m.isMDXComponent=!0}}]);