"use strict";(self.webpackChunkosc_docs=self.webpackChunkosc_docs||[]).push([[7104],{9210:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var t=r(4848),n=r(8453);const i={title:"Users Route",description:"Club Website Developer API",sidebar_position:6},d="Users Route",l={id:"legacy/Developers/API/users",title:"Users Route",description:"Club Website Developer API",source:"@site/docs/website/legacy/Developers/API/users.md",sourceDirName:"legacy/Developers/API",slug:"/legacy/Developers/API/users",permalink:"/docs/website/legacy/Developers/API/users",draft:!1,unlisted:!1,editUrl:"https://github.com/ufosc/osc-docs/blob/main/docs/website/legacy/Developers/API/users.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Users Route",description:"Club Website Developer API",sidebar_position:6},sidebar:"defaultSidebar",previous:{title:"Edit Route",permalink:"/docs/website/legacy/Developers/API/edit"},next:{title:"Caching",permalink:"/docs/website/legacy/Developers/caching"}},a={},o=[{value:"Bulk Retrieve Users: (GET) /api/users/",id:"bulk-retrieve-users-get-apiusers",level:2},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Sample Response",id:"sample-response",level:3},{value:"Example",id:"example",level:3},{value:"Fetch User: (GET) api/users/",id:"fetch-user-get-apiusers",level:2},{value:"Request Parameters",id:"request-parameters-1",level:3},{value:"Example",id:"example-1",level:3},{value:"Create User: (POST) /api/users/",id:"create-user-post-apiusers",level:2},{value:"Request Parameters",id:"request-parameters-2",level:3},{value:"Response",id:"response",level:3},{value:"Example",id:"example-2",level:3},{value:"Modify User: (PUT) api/users/",id:"modify-user-put-apiusers",level:2},{value:"Request Parameters",id:"request-parameters-3",level:3},{value:"Response",id:"response-1",level:3},{value:"Example",id:"example-3",level:3},{value:"Delete User: (DELETE) api/users/",id:"delete-user-delete-apiusers",level:2},{value:"Request Parameters",id:"request-parameters-4",level:3},{value:"Response",id:"response-2",level:3},{value:"Example",id:"example-4",level:3}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"users-route",children:"Users Route"}),"\n",(0,t.jsx)(s.admonition,{title:"OUTDATED",type:"danger",children:(0,t.jsxs)(s.p,{children:["This page is part of the documentation for release V1.0. This documentation is outdated and V1.0 is no longer maintained. See ",(0,t.jsx)(s.a,{href:"/docs/website/",children:"index"})," for the latest information."]})}),"\n",(0,t.jsxs)(s.p,{children:["The users route interfaces with the users  ",(0,t.jsx)(s.a,{href:"/docs/website/legacy/Developers/Databases/models",children:"database model"})," and serves users using their database ID."]}),"\n",(0,t.jsx)(s.admonition,{title:"routes/users.js",type:"tip",children:(0,t.jsxs)(s.p,{children:["The users route is defined in ",(0,t.jsx)(s.a,{href:"https://github.com/ufosc/Club_Website_2/blob/main/routes/users.js",children:"/routes/users.js"})," and operates on the ",(0,t.jsx)(s.code,{children:"/api/users"})," API path."]})}),"\n",(0,t.jsx)(s.h2,{id:"bulk-retrieve-users-get-apiusers",children:"Bulk Retrieve Users: (GET) /api/users/"}),"\n",(0,t.jsxs)(s.p,{children:["To index users on the /admin page, it was necessary to implement a route which returned an index of the most recently created users. Unlike the ",(0,t.jsx)(s.code,{children:"GET: /api/users/:id"})," route, which individual user metadata, the ",(0,t.jsx)(s.code,{children:"GET: /api/users/"})," route returns all users in the database."]}),"\n",(0,t.jsx)(s.p,{children:"This is an authenticated route."}),"\n",(0,t.jsx)(s.h3,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"JWT (cookie)"}),(0,t.jsx)(s.td,{children:"(Required) Auth cookie"})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"sample-response",children:"Sample Response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="Content-Type: application/json"',children:'[\n\t{\n\t\t"_id":"64bff624f6a34b73e74e7ddd",\n\t\t"username":"admin",\n\t\t"fullName":"admin",\n\t\t"role":"admin",\n\t\t"isAdmin":true,\n\t\t"date":"2023-07-25T16:19:48.161Z",\n\t\t"__v":0\n\t}\n]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Empty response:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"Content-Type: application/json"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="Content-Type: application/json"',children:"[]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -XGET --cookie \"jwt=<AUTH COOKIE>\" 'https://ufosc.org/api/users'\n"})}),"\n",(0,t.jsxs)(s.h2,{id:"fetch-user-get-apiusers",children:["Fetch User: (GET) api/users/",":id"]}),"\n",(0,t.jsx)(s.p,{children:"This route fetches users by the specified URL ID parameter and returns them as a JSON object. This is an authenticated route."}),"\n",(0,t.jsx)(s.h3,{id:"request-parameters-1",children:"Request Parameters"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsxs)(s.td,{children:[":id"," (path)"]}),(0,t.jsx)(s.td,{children:"ID of the requested user."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"JWT (cookie)"}),(0,t.jsx)(s.td,{children:"(Optional) Auth cookie."})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"example-1",children:"Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -XGET 'https://ufosc.org/api/users/<USER ID HERE>'\n"})}),"\n",(0,t.jsx)(s.h2,{id:"create-user-post-apiusers",children:"Create User: (POST) /api/users/"}),"\n",(0,t.jsx)(s.p,{children:"This route consumes a JSON body and produces a new blog article. This route requires authentication."}),"\n",(0,t.jsx)(s.h3,{id:"request-parameters-2",children:"Request Parameters"}),"\n",(0,t.jsxs)(s.p,{children:["Request body: ",(0,t.jsx)(s.code,{children:"Content-Type: application/json"})]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"JWT (cookie)"}),(0,t.jsx)(s.td,{children:"(Required) Auth cookie"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"userame (body)"}),(0,t.jsx)(s.td,{children:"(Required) Username, must be unique."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"password (body)"}),(0,t.jsx)(s.td,{children:"(Required) Password, must be > 6 chars."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"fullName (body)"}),(0,t.jsx)(s.td,{children:"(Optional) User full name"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"role (body)"}),(0,t.jsx)(s.td,{children:"(Required) User role, any string."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"isAdmin (body)"}),(0,t.jsx)(s.td,{children:"(Required) Whether this user is an admin, boolean"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"response",children:"Response"}),"\n",(0,t.jsx)(s.p,{children:"The server responds with the newly created JSON user object (the password is ommitted)."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"Content-Type: application/json"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="application/json"',children:'{\n\t"_id":"64bff624f6a34b73e74e7ddd",\n\t"username":"admin",\n\t"fullName":"admin",\n\t"role":"admin",\n\t"isAdmin":true,\n\t"date":"2023-07-25T16:19:48.161Z",\n\t"__v":0\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"If the request body is missing the required fields, the following error will be returned:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "Missing field(s) in request body" }\n'})}),"\n",(0,t.jsxs)(s.p,{children:["If the client attempts to manually assign an ID, by including an ",(0,t.jsx)(s.code,{children:"_id"})," or ",(0,t.jsx)(s.code,{children:"id"})," key in the request body, the following error will be returned:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "Setting custom user ID is prohibited" }\n'})}),"\n",(0,t.jsx)(s.p,{children:"If the username already exists, the following error is returned:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "username already exists" }\n'})}),"\n",(0,t.jsx)(s.h3,{id:"example-2",children:"Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'curl -XPOST --cookie "jwt=<AUTH COOKIE>" -H "Content-type: application/json" -d \'{\n\t"username": "myUser",\n\t"password":"123456",\n\t"role":"club manager",\n\t"isAdmin": false\n}\' \'https://ufosc.org/api/users/\'\n'})}),"\n",(0,t.jsxs)(s.h2,{id:"modify-user-put-apiusers",children:["Modify User: (PUT) api/users/",":id"]}),"\n",(0,t.jsxs)(s.p,{children:["Modifies an existing user specified by the path parameter '",":id","'. This is an authenticated route."]}),"\n",(0,t.jsx)(s.h3,{id:"request-parameters-3",children:"Request Parameters"}),"\n",(0,t.jsxs)(s.p,{children:["Request body: ",(0,t.jsx)(s.code,{children:"Content-Type: application/json"})]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsxs)(s.td,{children:[":id"," (path)"]}),(0,t.jsx)(s.td,{children:"ID of the user."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"JWT (cookie)"}),(0,t.jsx)(s.td,{children:"(Required) Auth cookie"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"userame (body)"}),(0,t.jsx)(s.td,{children:"(Optional) Username, must be unique."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"password (body)"}),(0,t.jsx)(s.td,{children:"(Optional) Password, must be > 6 chars."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"fullName (body)"}),(0,t.jsx)(s.td,{children:"(Optional) User full name"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"role (body)"}),(0,t.jsx)(s.td,{children:"(Optional) User role, any string."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"isAdmin (body)"}),(0,t.jsx)(s.td,{children:"(Optional) Whether this user is an admin, boolean"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"response-1",children:"Response"}),"\n",(0,t.jsx)(s.p,{children:"The server responds with the modified JSON user object (password ommitted)."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"Content-Type: application/json"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="application/json"',children:'{\n\t"_id":"64bff624f6a34b73e74e7ddd",\n\t"username":"admin",\n\t"fullName":"admin",\n\t"role":"admin",\n\t"isAdmin":true,\n\t"date":"2023-07-25T16:19:48.161Z",\n\t"__v":0\n}\n'})}),"\n",(0,t.jsxs)(s.p,{children:["If the ",(0,t.jsx)(s.code,{children:"_id"})," and ",(0,t.jsx)(s.code,{children:"date"})," keys are ommitted, then the above response example may also be used as a sample request body. Note that all schema keys are optional: only the key/values that the client wishes to modify need to be specified."]}),"\n",(0,t.jsxs)(s.p,{children:["If the '",":id","' parameter is invalid, the following JSON object is returned:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "Invalid ID" }\n'})}),"\n",(0,t.jsx)(s.p,{children:"If the ID is valid but not longer exists, the following JSON object is returned:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "ID does not exist" }\n'})}),"\n",(0,t.jsxs)(s.p,{children:["To maintain database collection consistency, and prevent unexpected collision/behavior from renamed user IDs, modifying the ID parameter of users is prohibited. If a client attempts to send a JSON request body with an ",(0,t.jsx)(s.code,{children:"id"})," or ",(0,t.jsx)(s.code,{children:"_id"})," key, the following error will be returned:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/blog.js"',children:'{ "error": "Setting custom user ID is prohibited" }\n'})}),"\n",(0,t.jsx)(s.p,{children:"If a client lacks sufficient authentication, a status 401-Forbidden error will be returned."}),"\n",(0,t.jsx)(s.h3,{id:"example-3",children:"Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'curl -XPUT --cookie "jwt=<AUTH COOKIE>" -H "Content-type: application/json" -d \'{\n\t"username": "myUser",\n\t"password":"123456",\n\t"role":"club manager",\n\t"isAdmin": false\n}\' \'https://ufosc.org/api/users/<USER ID HERE>\'\n'})}),"\n",(0,t.jsxs)(s.h2,{id:"delete-user-delete-apiusers",children:["Delete User: (DELETE) api/users/",":id"]}),"\n",(0,t.jsxs)(s.p,{children:["Deletes the user specified by the path parameter '",":id","'. This is an authenticated route."]}),"\n",(0,t.jsx)(s.h3,{id:"request-parameters-4",children:"Request Parameters"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsxs)(s.td,{children:[":id"," (path)"]}),(0,t.jsx)(s.td,{children:"User's ID"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"JWT (cookie)"}),(0,t.jsx)(s.td,{children:"(Required) Auth cookie"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"response-2",children:"Response"}),"\n",(0,t.jsx)(s.p,{children:"The server responds with the JSON object of the deleted user (password ommitted)."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"Content-Type: application/json"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="Content-Type: application/json"',children:'{\n\t"_id":"64bff624f6a34b73e74e7ddd",\n\t"username":"admin",\n\t"fullName":"admin",\n\t"role":"admin",\n\t"isAdmin":true,\n\t"date":"2023-07-25T16:19:48.161Z",\n\t"__v":0\n}\n'})}),"\n",(0,t.jsxs)(s.p,{children:["If the '",":id","' parameter is invalid, the following JSON object is returned:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "Invalid ID" }\n'})}),"\n",(0,t.jsx)(s.p,{children:"If the ID is valid but not longer exists, the following JSON object is returned:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "User not found" }\n'})}),"\n",(0,t.jsx)(s.p,{children:"If the client attempts to delete the sole admin, the following JSON object is returned:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",metastring:'title="routes/users.js"',children:'{ "error": "Deleting admin is prohibited" }\n'})}),"\n",(0,t.jsx)(s.p,{children:"If a client lacks sufficient authentication, a status 401-Forbidden error will be returned."}),"\n",(0,t.jsx)(s.h3,{id:"example-4",children:"Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -XDELETE --cookie \"jwt=<AUTH COOKIE>\" 'https://ufosc.org/api/users/<USER ID HERE>'\n"})})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>d,x:()=>l});var t=r(6540);const n={},i=t.createContext(n);function d(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);