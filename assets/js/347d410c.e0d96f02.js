"use strict";(self.webpackChunkosc_docs=self.webpackChunkosc_docs||[]).push([[644],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,c=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),h=l(n),m=r,d=h["".concat(s,".").concat(m)]||h[m]||u[m]||c;return n?a.createElement(d,i(i({ref:t},p),{},{components:n})):a.createElement(d,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var c=n.length,i=new Array(c);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[h]="string"==typeof e?e:r,i[1]=o;for(var l=2;l<c;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1275:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>l});var a=n(7462),r=(n(7294),n(3905));const c={title:"Caching",description:"Club Website Developer Caching",sidebar_position:6},i="Caching",o={unversionedId:"Developers/caching",id:"Developers/caching",title:"Caching",description:"Club Website Developer Caching",source:"@site/docs/website/Developers/caching.md",sourceDirName:"Developers",slug:"/Developers/caching",permalink:"/docs/website/Developers/caching",draft:!1,editUrl:"https://github.com/ufosc/osc-docs/docs/website/Developers/caching.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Caching",description:"Club Website Developer Caching",sidebar_position:6},sidebar:"defaultSidebar",previous:{title:"Users Route",permalink:"/docs/website/Developers/API/users"},next:{title:"Authentication",permalink:"/docs/website/Developers/authentication"}},s={},l=[{value:"Cache Module",id:"cache-module",level:2},{value:"Example: Writing to the Cache",id:"example-writing-to-the-cache",level:3},{value:"Example: Reading from the Cache",id:"example-reading-from-the-cache",level:3},{value:"Example: Force-updating the cache",id:"example-force-updating-the-cache",level:3},{value:"Example: Starting/Stopping the cache",id:"example-startingstopping-the-cache",level:3}],p={toc:l},h="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(h,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"caching"},"Caching"),(0,r.kt)("p",null,"Caching allows the website's server to imporove performance and preserve CPU by storing time-insensitive data in memory. Its most common use case is in serving the home and blog pages: instead of dynamically re-rendering the same page for each user request, it is rendered only once and then served from memory. Naturally, the cache updates its data after some predetermined time period, configurable by the ",(0,r.kt)("a",{parentName:"p",href:"/docs/website/Developers/configuration#caching"},"CACHE_INTERVAL")," environment variable."),(0,r.kt)("h2",{id:"cache-module"},"Cache Module"),(0,r.kt)("p",null,"The cache module is defined in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ufosc/Club_Website_2/blob/main/utils/cache.js"},"utils/cache.js"),". The cache essentially functions as a state machine: it consumes user-defined functions that modify variables in the cache's internal state, and runs said functions at most once every ",(0,r.kt)("inlineCode",{parentName:"p"},"CACHE_INTERVAL")," minutes. Likewise, if the ",(0,r.kt)("inlineCode",{parentName:"p"},"CACHE_INTERVAL")," passes, then it will not update the cache until some other module tries to read its data (e.g when the server reads the cache to server a user's request)."),(0,r.kt)("h3",{id:"example-writing-to-the-cache"},"Example: Writing to the Cache"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const CacheModule = require(\'./utils/cache\')\nconst cache = new CacheModule()\n\n// These functions will run at most once every CACHE_INTERVAL.\n// Their return values (which must be JSON objects) will be\n// written to the cache\'s memory.\n\ncache.register(() => {\n    return { myKey1: "my value 1", myKey2: "my value 2" }\n})\n\ncache.register(() => {\n    return { myKey3: "my value 3", myKey4: "my value 4" }\n})\n\n// Registering multiple functions\n\ncache.register(myFunction1, myFunction2, ...)\n\n// Start the cache interval.\n// Updates every 5 minutes.\ncache.start(5)\n')),(0,r.kt)("h3",{id:"example-reading-from-the-cache"},"Example: Reading from the Cache"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// You can read the stored cache values by reading from\n// the .cache() object using the same keys that were\n// returned by the registered callbacks.\n\nconsole.log(cache.cache().myKey1)\nconsole.log(cache.cache().myKey2)\nconsole.log(cache.cache().myKey3)\n")),(0,r.kt)("h3",{id:"example-force-updating-the-cache"},"Example: Force-updating the cache"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"cache.run()\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},".run()")," will force each callback function to be executed, hence forcefully updating the cache's state."),(0,r.kt)("h3",{id:"example-startingstopping-the-cache"},"Example: Starting/Stopping the cache"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Start, update every 5 minutes.\ncache.start(5)\n\n// Stop the interval.\ncache.stop()\n\n// Start again\ncache.start(5)\n")),(0,r.kt)("p",null,"The cache can be started and stopped with the ",(0,r.kt)("inlineCode",{parentName:"p"},".start(MINUTES)")," and ",(0,r.kt)("inlineCode",{parentName:"p"},".stop()")," functions, respectively. The cache can be started and stopped as many times as needed without consequence."))}u.isMDXComponent=!0}}]);